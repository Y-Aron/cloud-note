# 接口白名单配置

#### Session超时配置白名单说明

在`web.xml`中配置(兼容以前的格式使用`weaver_session_filter.properties`后可以不添加参数配置)

`SessionCloudFilter`过滤器修改一下`unchecksessionurl`路径主要功能超时自动跳转首页

- `checkurl` 头部验证路径 适用于 EM

- `uncheckurl` 头部验证放行路径 适用于 EM

- `unchecksessionurl`路径为不检查放行的路径（白名单）

```xml
<filter>
    <filter-name>SessionCloudFilter</filter-name>
    <filter-class>com.cloudstore.dev.api.service.SessionFilte</filter-class>
    
    <init-param>
        <param-name>checkurl</param-name>
        <param-value>/api/hrm/emmanager;</param-value>
    </init-param>
    
    <init-param>
        <param-name>uncheckurl</param-name>
        <param-value>/api/ec/dev/app/getCheckSystemInfo;/api/ec/dev/app/emjoin;</param-value>
    </init-param>
    <init-param>
        <param-name>unchecksessionurl</param-name>
        <param-value></param-value>
    </init-param>
</filter>
// ……(其他配置信息不动)
```


#### 配置文件方式配置 

> `weaver_session_filter.properties`(系统) <br>
> `weaver_session_filter_dev.properties`(用户自定义)

支持 `weaver_session_filter.properties`外部配置文件，配置放行的路径地址。(启用了`weaver_session_filter.properties`会自动覆盖原`web.xml`中的路径）

`weaver_session_filter_dev.properties`用户自定义配置文件，配置放行的路径地址(项目二开的路径建议放用户定义配置文件，升级时不被覆盖)

会自动覆盖web.xml 中的路径地址。

- `checkurl`：头部验证路径 适用于 EM

- `uncheckurl`：头部验证放行路径 适用于 EM

- `unchecksessionurl`： session验证放行 不检查放行的路径（白名单）


> 关于路径请各模块收集一下需要未登录放行的路径

```properties
checkurl=/api/hrm/emmanager;

uncheckurl=/api/ec/dev/app/getCheckSystemInfo;/api/ec/dev/app/emjoin;

unchecksessionurl=/api/doc/upload/mobile/uploadFile;/api/doc/upload/mobile/shareFile;/weaver/weaver.file.FileDownload;/api/ec/dev/app/getCheckSystemInfo;/api/ec/dev/app/emjoin;/api/hrm/emmanager/;
```